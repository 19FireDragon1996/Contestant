<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Scavenger Hunt - Contestant Viewer</title>
   <style>
       .tab-container {
           display: flex;
           flex-direction: row;
           margin-bottom: 20px;
       }
       .tab {
           padding: 10px 20px;
           cursor: pointer;
           background-color: #f0f0f0;
           border: 1px solid #ccc;
           margin-right: 5px;
       }
       .tab.active {
           background-color: #ccc;
           font-weight: bold;
       }
       .tab-content {
           display: none;
           margin-top: 10px;
       }
       .tab-content.active {
           display: block;
       }
       .scavenger-item {
           display: flex;
           align-items: center;
           margin-top: 5px;
       }
       .counter {
           margin-left: 10px;
           background-color: #e0e0e0;
           border-radius: 5px;
           padding: 2px 5px;
           cursor: pointer;
           font-size: 0.9em;
       }
   </style>
</head>
<body>

   <h1>Scavenger Hunt - Contestant Viewer</h1>
   <div class="tab-container" id="tabs"></div>
   <div id="tabContents"></div>

   <script>
       async function loadContestantData() {
           try {
               const response = await fetch('https://raw.githubusercontent.com/your-username/your-repo/main/scavenger_lists.json');
               const data = await response.json();
               displayContestants(data);
           } catch (error) {
               console.error("Error fetching contestant data:", error);
           }
       }

       function displayContestants(data) {
           Object.keys(data).forEach(contestantId => {
               const contestant = data[contestantId];

               // Create tab button
               const tab = document.createElement("div");
               tab.classList.add("tab");
               tab.id = `tab-${contestantId}`;
               tab.textContent = contestant.name;
               tab.onclick = () => showTab(contestantId);
               document.getElementById("tabs").appendChild(tab);

               // Create tab content area
               const tabContent = document.createElement("div");
               tabContent.classList.add("tab-content");
               tabContent.id = `content-${contestantId}`;

               // Display each task
               const items = contestant.list.split("\n").filter(item => item.trim() !== "");
               items.forEach((item, index) => {
                   const itemContainer = document.createElement("div");
                   itemContainer.classList.add("scavenger-item");

                   const label = document.createElement("span");
                   label.textContent = item;

                   itemContainer.appendChild(label);

                   // Check if task requires a counter (based on wording or task rules)
                   if (item.includes("Collect") || item.includes("Find") || item.includes("Take")) {
                       const counter = document.createElement("span");
                       counter.classList.add("counter");
                       counter.textContent = `Progress: 0`;

                       // Store the progress in localStorage and update on click
                       const key = `${contestantId}-task-${index}-progress`;
                       const savedProgress = parseInt(localStorage.getItem(key), 10) || 0;
                       counter.textContent = `Progress: ${savedProgress}`;

                       counter.onclick = () => {
                           let currentProgress = parseInt(localStorage.getItem(key), 10) || 0;
                           currentProgress++;
                           localStorage.setItem(key, currentProgress);
                           counter.textContent = `Progress: ${currentProgress}`;
                       };

                       itemContainer.appendChild(counter);
                   }

                   tabContent.appendChild(itemContainer);
               });

               document.getElementById("tabContents").appendChild(tabContent);
           });

           // Show the first tab by default
           showTab(Object.keys(data)[0]);
       }

       function showTab(id) {
           document.querySelectorAll(".tab-content").forEach(content => content.classList.remove("active"));
           document.querySelectorAll(".tab").forEach(tab => tab.classList.remove("active"));

           document.getElementById(`content-${id}`).classList.add("active");
           document.getElementById(`tab-${id}`).classList.add("active");
       }

       loadContestantData();
   </script>
</body>
</html>
